Schema files:

app.schemas.user.py
from typing import Optional
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel, EmailStr


class UserCreate(BaseModel):
    email: EmailStr
    password_hash: str
    role: str  # 'buyer', 'vendor', or 'admin'
    full_name: Optional[str] = None
    profile_image_url: Optional[str] = None
    is_active: Optional[bool] = True


class UserRead(BaseModel):
    id: UUID
    email: EmailStr
    role: str
    full_name: Optional[str] = None
    profile_image_url: Optional[str] = None
    last_login: Optional[datetime] = None
    is_active: bool
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True
    }

app.schemas.vendor.py
from typing import Optional
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel, EmailStr


class VendorCreate(BaseModel):
    name: str
    industry_focus: Optional[str] = None
    description: Optional[str] = None
    contact_email: Optional[EmailStr] = None
    contact_phone: Optional[str] = None
    website_url: Optional[str] = None
    logo_url: Optional[str] = None
    country: Optional[str] = None
    region: Optional[str] = None
    city: Optional[str] = None
    address: Optional[str] = None
    organization_type: Optional[str] = None
    founded_year: Optional[int] = None


class VendorRead(VendorCreate):
    id: UUID
    user_id: Optional[UUID] = None
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True  # Pydantic v2 replacement for orm_mode
    }

app.schemas.buyer.py
from typing import Optional
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel, EmailStr


class BuyerCreate(BaseModel):
    name: str
    organization: Optional[str] = None
    contact_email: Optional[EmailStr] = None
    contact_phone: Optional[str] = None
    country: Optional[str] = None
    region: Optional[str] = None
    city: Optional[str] = None
    address: Optional[str] = None
    organization_type: Optional[str] = None
    job_title: Optional[str] = None
    industry: Optional[str] = None
    use_case_focus: Optional[str] = None


class BuyerRead(BuyerCreate):
    id: UUID
    user_id: Optional[UUID] = None
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True  # Pydantic v2 replacement for orm_mode
    }

app.schemas.dataset.py
from typing import Optional, List, Any, Dict
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel


class DatasetCreate(BaseModel):
    vendor_id: UUID
    title: str
    description: Optional[str] = None
    domain: Optional[str] = None
    dataset_type: Optional[str] = None
    granularity: Optional[str] = None
    pricing_model: Optional[str] = None
    license: Optional[str] = None
    topics: Optional[Any] = None
    entities: Optional[Any] = None
    temporal_coverage: Optional[Any] = None
    geographic_coverage: Optional[Any] = None
    visibility: Optional[str] = "public"
    status: Optional[str] = "active"
    columns: Optional[List[Dict[str, Any]]] = None  # for input only, mapped to dataset_columns
    embedding_input: Optional[str] = None
    embedding: Optional[List[float]] = None


class DatasetRead(DatasetCreate):
    id: UUID
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True  # Pydantic v2 replacement for orm_mode
    }

app.schemas.dataset_column.py

from typing import Optional, Any
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel


class DatasetColumnCreate(BaseModel):
    dataset_id: UUID
    name: str
    description: Optional[str] = None
    data_type: Optional[str] = None
    sample_values: Optional[Any] = None


class DatasetColumnUpdate(BaseModel):
    name: Optional[str] = None
    description: Optional[str] = None
    data_type: Optional[str] = None
    sample_values: Optional[Any] = None


class DatasetColumnRead(DatasetColumnCreate):
    id: int
    created_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True  # Pydantic v2 replacement for orm_mode
    }

app.schemas.agent.py
from typing import Optional
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel


class AgentCreate(BaseModel):
    vendor_id: UUID
    name: Optional[str] = None
    description: Optional[str] = None
    model_used: Optional[str] = "gemini-embedding-001"
    config: Optional[dict] = None
    active: Optional[bool] = True


class AgentRead(AgentCreate):
    id: UUID
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True  # Pydantic v2 replacement for orm_mode
    }

app.schemas.chat.py
from typing import Optional
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel


class ChatCreate(BaseModel):
    user_id: UUID
    vendor_id: Optional[UUID] = None  # NULL for discovery chats
    agent_id: Optional[UUID] = None   # optional vendor agent
    chat_type: str  # 'discovery' or 'vendor'
    title: Optional[str] = None
    is_active: Optional[bool] = True


class ChatRead(ChatCreate):
    id: UUID
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True
    }

app.schemas.chat_message.py

from typing import Optional, Any
from datetime import datetime
from uuid import UUID
from pydantic import BaseModel


class ChatMessageCreate(BaseModel):
    chat_id: UUID
    sender_type: str  # 'user', 'agent', 'system'
    message: str
    message_metadata: Optional[Any] = None  # JSONB


class ChatMessageRead(ChatMessageCreate):
    id: int
    created_at: Optional[datetime] = None

    model_config = {
        "from_attributes": True
    }